{"ast":null,"code":"var _jsxFileName = \"/Users/huynh/Documents/Projects/asis-me/src/components/State.js\";\nimport React from \"react\";\nimport Form from \"./Form\";\nconst Url = \" https://covidtracking.com/api/states?hash=\";\nlet baseURL = process.env.REACT_APP_BASEURL;\n\nif (process.env.NODE_ENV === \"development\") {\n  baseURL = \" https://asisme-backend.herokuapp.com\";\n} else {\n  baseURL = \"\";\n}\n\nconsole.log(\"current base URL: \" + baseURL);\nfetch(baseURL + \"/requests\").then(data => {\n  return data.json();\n}).then(parsedData => console.log(parsedData), err => console.log(err));\n\nclass State extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      activeState: \"\",\n      isLoading: true,\n      error: null,\n      requests: [],\n      request: null\n    };\n\n    this.componentDidMount = () => {\n      console.log(this.props.location.state.info);\n      const hash = this.props.location.state.info;\n      fetch(Url + \"/\" + hash).then(res => res.json()).then(data => {\n        this.setState({\n          activeState: data,\n          isLoading: false\n        });\n      }).catch(error => this.setState({\n        error,\n        isLoading: false\n      }));\n      this.getRequest();\n    };\n\n    this.getRequest = requests => {\n      this.setState({\n        requests\n      });\n    };\n\n    this.getRequest = () => {\n      fetch(baseURL + \"/requests\").then(data => {\n        return data.json();\n      }, err => console.log(err)).then(parsedData => this.setState({\n        requests: parsedData\n      }), err => console.log(err));\n    };\n\n    this.handleAddRequest = request => {\n      const copyRequest = [...this.state.requests];\n      copyRequest.unshift(request);\n      this.setState({\n        requests: copyRequest,\n        name: '',\n        email: '',\n        state: '',\n        city: '',\n        severity: '',\n        request: '',\n        supportNumber: ''\n      });\n    };\n\n    this.addSupport = request => {\n      //holidays.put(\"/:id\")\n      fetch(baseURL + '/requests/' + request._id, {\n        method: 'PUT',\n        body: JSON.stringify({\n          support: request.support + 1\n        }),\n        headers: {\n          'Content-Type': 'application/json'\n        }\n      }).then(res => res.json()).then(resJson => {\n        const copyRequests = [...this.state.requests];\n        const findIndex = this.state.requests.findIndex(request => request._id === resJson._id);\n        copyRequests[findIndex].support = resJson.support;\n        this.setState({\n          requests: copyRequests\n        });\n      });\n    };\n\n    this.deleteRequest = id => {\n      fetch(baseURL + '/requests/' + id, {\n        method: 'DELETE'\n      }).then(response => {\n        const requestsArr = this.state.requests.filter(request => {\n          return request._id !== id;\n        });\n        this.setState({\n          requests: requestsArr\n        });\n      });\n    };\n  }\n\n  render() {\n    console.log(\"requests\", this.requests);\n    console.log(\"state\", this.state);\n    console.log(\"props\", this.props);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"StatePage\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(Form, {\n      baseURL: baseURL,\n      handleAddRequest: this.handleAddRequest,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 17\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }\n    }, !this.state.isLoading ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"info\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 25\n      }\n    }, \"State: \", /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 35\n      }\n    }, \" \", this.state.activeState.state, \" \")), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 25\n      }\n    }, \"Deaths: \", /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 36\n      }\n    }, \" \", this.state.activeState.death, \" \")), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 25\n      }\n    }, \"Positive Results: \", /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 46\n      }\n    }, \" \", this.state.activeState.positive, \" \")), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 25\n      }\n    }, \"Total Tested Results: \", /*#__PURE__*/React.createElement(\"strong\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 50\n      }\n    }, \" \", this.state.activeState.totalTestResults, \" \"))) : /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133,\n        columnNumber: 30\n      }\n    }, \"Gathering Information...\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"main-request\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 17\n      }\n    }, this.state.requests.map(requests => requests.state === this.state.activeState.state ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"request\",\n      key: requests._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"p\", {\n      className: \"n\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 35\n      }\n    }, requests.name), /*#__PURE__*/React.createElement(\"a\", {\n      className: \"e\",\n      href: `mailto: ${requests.email}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 35\n      }\n    }, \" \", requests.email, \" \"), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"l\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 35\n      }\n    }, requests.city), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"s\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 35\n      }\n    }, requests.severity), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"sup-img\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 35\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      className: \"SupportBtn\",\n      onClick: () => this.addSupport(requests),\n      src: \"/heart.png\",\n      alt: \"Support Button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 39\n      }\n    }), \" \", /*#__PURE__*/React.createElement(\"span\", {\n      className: \"like\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 149\n      }\n    }, requests.support))), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"x\",\n      onClick: () => this.deleteRequest(requests._id),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 33\n      }\n    }, \"X\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"word\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 33\n      }\n    }, requests.request)) : null))));\n  }\n\n}\n\nexport default State;","map":{"version":3,"sources":["/Users/huynh/Documents/Projects/asis-me/src/components/State.js"],"names":["React","Form","Url","baseURL","process","env","REACT_APP_BASEURL","NODE_ENV","console","log","fetch","then","data","json","parsedData","err","State","Component","state","activeState","isLoading","error","requests","request","componentDidMount","props","location","info","hash","res","setState","catch","getRequest","handleAddRequest","copyRequest","unshift","name","email","city","severity","supportNumber","addSupport","_id","method","body","JSON","stringify","support","headers","resJson","copyRequests","findIndex","deleteRequest","id","response","requestsArr","filter","render","death","positive","totalTestResults","map"],"mappings":"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","sourcesContent":["import React from \"react\"\nimport Form from \"./Form\"\n\n\nconst Url = \" https://covidtracking.com/api/states?hash=\"\n\nlet baseURL = process.env.REACT_APP_BASEURL\n\nif (process.env.NODE_ENV === \"development\") {\n    baseURL = \" https://asisme-backend.herokuapp.com\"\n} else {\n    baseURL = \"\"\n}\n\nconsole.log(\"current base URL: \" + baseURL)\n\nfetch(baseURL + \"/requests\")\n    .then(data => {\n        return data.json()})\n        .then(parsedData => console.log(parsedData),\n            err => console.log(err))\n\n\n\n\n\n\nclass State extends React.Component {\n    state = {\n        activeState: \"\",\n        isLoading: true,\n        error: null,\n        requests: [],\n        request: null\n    }\n\n//lifecycle method\n    componentDidMount = () => {\n        console.log(this.props.location.state.info)\n        const hash = this.props.location.state.info\n        fetch(Url+ \"/\" +hash)\n            .then(res => res.json())\n            .then(data => {\n                this.setState({\n                    activeState: data,\n                    isLoading: false\n                })\n            })\n            .catch(error => this.setState({error, isLoading: false}))\n            \n            this.getRequest();\n    }\n\n\n     //show\n  getRequest = requests => {\n    this.setState({requests})\n  }\n\n\n    getRequest = () => {\n        fetch(baseURL + \"/requests\")\n            .then(data => {\n                return data.json()},\n                err => console.log(err))\n            .then(parsedData => this.setState({requests: parsedData}),\n            err=> console.log(err))\n    }\n    \n    \n    handleAddRequest = (request) => {\n        const copyRequest = [...this.state.requests]\n        copyRequest.unshift(request)\n        this.setState({\n          requests: copyRequest,\n          name: '',\n          email: '',\n          state: '',\n          city: '',\n          severity: '',\n          request: '',\n          supportNumber: ''\n        })\n      }\n\n      addSupport = (request) => {\n        //holidays.put(\"/:id\")\n        fetch(baseURL + '/requests/' + request._id, {\n          method: 'PUT',\n          body: JSON.stringify({support: request.support + 1}),\n          headers: {\n            'Content-Type' : 'application/json'\n          }\n        }).then(res => res.json())\n        .then(resJson => {\n             const copyRequests = [...this.state.requests]\n              const findIndex = this.state.requests.findIndex(request => request._id === resJson._id)\n              copyRequests[findIndex].support = resJson.support;\n              this.setState({requests: copyRequests})\n        })\n      }\n\n      deleteRequest = (id) => {\n        fetch(baseURL + '/requests/' + id, {\n          method: 'DELETE'\n        }).then(response => {\n          const requestsArr = this.state.requests.filter( request => {\n            return request._id !== id\n          })\n          this.setState({requests: requestsArr})\n        })\n      }\n\n\n    render(){\n        console.log(\"requests\", this.requests)\n        console.log(\"state\", this.state)\n        console.log(\"props\", this.props)\n        return(\n            <div className=\"StatePage\">\n                <Form\n                baseURL={baseURL}\n                handleAddRequest={this.handleAddRequest}\n                />\n\n                <div className=\"form\">\n                    {!this.state.isLoading ?                  \n                    <div className=\"info\">\n                        <p>State: <strong> {this.state.activeState.state} </strong></p>\n                        <p>Deaths: <strong> {this.state.activeState.death} </strong></p>\n                        <p>Positive Results: <strong> {this.state.activeState.positive} </strong></p>\n                        <p>Total Tested Results: <strong> {this.state.activeState.totalTestResults} </strong></p>   \n                    </div> : <h2>Gathering Information...</h2>}\n                </div>\n\n                <div className=\"main-request\">\n                <ul>\n                    {this.state.requests.map(requests => (\n                        requests.state === this.state.activeState.state ?\n                            <div className=\"request\" key={requests._id}>\n                                <div className=\"title\">\n                                  <p className=\"n\">{requests.name}</p>\n                                  <a className=\"e\" href={`mailto: ${requests.email}`} > {requests.email} </a> \n                                  <p className=\"l\">{requests.city}</p>\n                                  <p className=\"s\">{requests.severity}</p>\n                                  \n                                  <div className=\"sup-img\">\n                                      <img className=\"SupportBtn\" onClick={() => this.addSupport(requests)} src=\"/heart.png\" alt=\"Support Button\"/> <span className=\"like\" >{requests.support}</span>\n                                  </div>\n                                </div> \n\n                                <p className=\"x\" onClick={() =>this.deleteRequest(requests._id)}>X</p>\n                                \n                                <div className=\"word\">\n                                  {requests.request}\n                                </div>   \n                            </div>\n                            : null\n                    ))} \n                    </ul> \n                </div>\n\n                \n\n            </div>\n        )\n    }\n}\n\n\n\n\n\n\n\n\n\n\n\nexport default State;"]},"metadata":{},"sourceType":"module"}